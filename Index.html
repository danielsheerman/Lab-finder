<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Science Lab Equipment Finder</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #2196F3, #21CBF3);
            padding: 30px;
            text-align: center;
            color: white;
        }
        
        .header h1 { font-size: 2.5em; margin-bottom: 10px; font-weight: 300; }
        .header p { opacity: 0.9; font-size: 1.1em; }
        
        .search-section { padding: 30px; }
        
        .search-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 18px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            outline: none;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .search-input:focus {
            border-color: #2196F3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }
        
        .quick-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .filter-button {
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }
        
        .filter-button:hover, .filter-button.active {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }
        
        .results { display: none; }
        
        .result-item {
            background: #f8f9ff;
            border: 1px solid #e3f2fd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .cupboard-highlight {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .equipment-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .detail-label {
            font-weight: 600;
            color: #555;
            min-width: 80px;
        }
        
        .detail-value { color: #333; }
        
        .subject-tag {
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9em;
            text-transform: capitalize;
        }
        
        .room-tag {
            background: #fff3e0;
            color: #f57c00;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.9em;
        }
        
        .stats {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            color: #666;
        }
        
        .floor-plan-container {
            background: #f8f9ff;
            border: 2px solid #e3f2fd;
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            display: none;
        }
        
        .floor-plan-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #1976d2;
            margin-bottom: 15px;
        }
        
        .floor-plan-image {
            position: relative;
            display: inline-block;
            max-width: 100%;
            background: white;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
        }
        
        .floor-plan-image img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        .legend {
            margin-top: 15px;
            padding: 10px;
            background: #fff3e0;
            border-radius: 8px;
            font-size: 0.9em;
            color: #f57c00;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        @media (max-width: 768px) {
            .equipment-details { grid-template-columns: 1fr; }
            .header h1 { font-size: 2em; }
            .search-section { padding: 20px; }
            .floor-plan-image { 
                max-width: 100%; 
                overflow-x: auto;
            }
            .floor-plan-image > div > div {
                max-width: 100% !important;
                height: auto !important;
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔬 Lab Equipment Finder</h1>
            <p>Find laboratory equipment quickly - search in English or Danish</p>
        </div>
        
        <div class="search-section">
            <div class="stats">
                📊 Database contains 90 pieces of equipment across 3 laboratory rooms
            </div>
            
            <div class="quick-filters">
                <button class="filter-button active" onclick="filterBySubject('', this)">All</button>
                <button class="filter-button" onclick="filterBySubject('chemistry', this)">Chemistry</button>
                <button class="filter-button" onclick="filterBySubject('physics', this)">Physics</button>
                <button class="filter-button" onclick="filterBySubject('biology', this)">Biology</button>
                <button class="filter-button" onclick="filterBySubject('safety', this)">Safety</button>
                <button class="filter-button" onclick="filterBySubject('electricity', this)">Electricity</button>
                <button class="filter-button" onclick="filterBySubject('measurement', this)">Measurement</button>
                <button class="filter-button" onclick="filterBySubject('Light', this)">Light</button>
                <button class="filter-button" onclick="filterBySubject('sound', this)">Sound</button>
            </div>
            
            <input type="text" class="search-input" placeholder="Search for equipment... (e.g., 'beaker', 'bægerglas', 'thermometer', 'microscope')" oninput="handleSearch(this.value)">
            
            <div class="results" id="results"></div>
            
            <div class="floor-plan-container" id="floorPlanContainer">
                <div class="floor-plan-title" id="floorPlanTitle"></div>
                <div class="floor-plan-image" id="floorPlanImage"></div>
                <div class="legend">🎯 Red arrows point to cupboards containing your equipment</div>
            </div>
        </div>
    </div>

<script>
const equipmentData = [
    {"Cupboard":1,"Room":"Ellipsen","Contents":"measuring cylinders","Indhold":"målecylindre","Subject matter":"chemistry"},
    {"Cupboard":1,"Room":"Ellipsen","Contents":"beakers","Indhold":"bægerglas","Subject matter":"chemistry"},
    {"Cupboard":2,"Room":"Ellipsen","Contents":"test tubes","Indhold":"reagensglas","Subject matter":"chemistry"},
    {"Cupboard":2,"Room":"Ellipsen","Contents":"test tube holder","Indhold":"reagensglas stativ","Subject matter":"chemistry"},
    {"Cupboard":3,"Room":"Ellipsen","Contents":"evapourating dish","Indhold":"indampningsskål","Subject matter":"chemistry"},
    {"Cupboard":3,"Room":"Ellipsen","Contents":"wooden holders","Indhold":"træklemmer","Subject matter":"chemistry"},
    {"Cupboard":3,"Room":"Ellipsen","Contents":"pipette","Indhold":"pipette","Subject matter":"chemistry"},
    {"Cupboard":4,"Room":"Ellipsen","Contents":"crucibel tongs","Indhold":"crucible tongs","Subject matter":"chemistry"},
    {"Cupboard":4,"Room":"Ellipsen","Contents":"steel spoons","Indhold":"stålskeer","Subject matter":"chemistry"},
    {"Cupboard":4,"Room":"Ellipsen","Contents":"bunsen burners","Indhold":"bunsen brændere","Subject matter":"chemistry"},
    {"Cupboard":5,"Room":"Ellipsen","Contents":"gloves","Indhold":"handsker","Subject matter":"safety"},
    {"Cupboard":5,"Room":"Ellipsen","Contents":"tripods","Indhold":"stativer","Subject matter":"chemistry"},
    {"Cupboard":6,"Room":"Ellipsen","Contents":"safety goggles","Indhold":"sikkerhedsbriller","Subject matter":"safety"},
    {"Cupboard":7,"Room":"Ellipsen","Contents":"thermometers","Indhold":"termometre","Subject matter":"measurement"},
    {"Cupboard":7,"Room":"Ellipsen","Contents":"IR Thermometers","Indhold":"Infrarød termometre","Subject matter":"measurement"},
    {"Cupboard":8,"Room":"Ellipsen","Contents":"scales","Indhold":"vægte","Subject matter":"measurement"},
    {"Cupboard":9,"Room":"Ellipsen","Contents":"tubes","Indhold":"slanger","Subject matter":"chemistry"},
    {"Cupboard":10,"Room":"Ellipsen","Contents":"electrolysis beakers","Indhold":"elektrolsebægre","Subject matter":"chemistry"},
    {"Cupboard":10,"Room":"Ellipsen","Contents":"magnetic stiring machines","Indhold":"magnetiske røremaskiner","Subject matter":"chemistry"},
    {"Cupboard":11,"Room":"Ellipsen","Contents":"Carbon rods","Indhold":"kulstænger","Subject matter":"chemistry"},
    {"Cupboard":11,"Room":"Ellipsen","Contents":"crocodile clips","Indhold":"krokodille clips","Subject matter":"electricity"},
    {"Cupboard":11,"Room":"Ellipsen","Contents":"pestle and morter","Indhold":"morter","Subject matter":"chemistry"},
    {"Cupboard":12,"Room":"Ellipsen","Contents":"electricians pipes","Indhold":"elektriker rør","Subject matter":"-"},
    {"Cupboard":12,"Room":"Ellipsen","Contents":"floodlights","Indhold":"projectørlys","Subject matter":"Light"},
    {"Cupboard":15,"Room":"Ellipsen","Contents":"stopwatches","Indhold":"stopur","Subject matter":"measurement"},
    {"Cupboard":15,"Room":"Ellipsen","Contents":"string","Indhold":"snor","Subject matter":"-"},
    {"Cupboard":16,"Room":"Ellipsen","Contents":"electrical appliances","Indhold":"elektriske apparater","Subject matter":"electricity"},
    {"Cupboard":16,"Room":"Ellipsen","Contents":"micrometer","Indhold":"micrometer","Subject matter":"measurement"},
    {"Cupboard":16,"Room":"Ellipsen","Contents":"callipers","Indhold":"kalliper","Subject matter":"measurement"},
    {"Cupboard":16,"Room":"Ellipsen","Contents":"tape measures","Indhold":"målebånd","Subject matter":"measurement"},
    {"Cupboard":17,"Room":"Ellipsen","Contents":"glass plates","Indhold":"glasplader","Subject matter":"biology"},
    {"Cupboard":17,"Room":"Ellipsen","Contents":"microscopes","Indhold":"mikroskoper","Subject matter":"biology"},
    {"Cupboard":18,"Room":"Ellipsen","Contents":"microscope slides","Indhold":"objektglas","Subject matter":"biology"},
    {"Cupboard":19,"Room":"Ellipsen","Contents":"Urine bags","Indhold":"Urinposer","Subject matter":"biology"},
    {"Cupboard":20,"Room":"Ellipsen","Contents":"splints","Indhold":"træpinde","Subject matter":"chemistry"},
    {"Cupboard":20,"Room":"Ellipsen","Contents":"filterpaper","Indhold":"filterpapir","Subject matter":"chemistry"},
    {"Cupboard":20,"Room":"Ellipsen","Contents":"microscopes","Indhold":"mikroskoper","Subject matter":"biology"},
    {"Cupboard":21,"Room":"Ellipsen","Contents":"lighters and tape","Indhold":"lightere og tape","Subject matter":"-"},
    {"Cupboard":22,"Room":"Ellipsen","Contents":"glass tubes","Indhold":"glasrør","Subject matter":"chemistry"},
    {"Cupboard":22,"Room":"Ellipsen","Contents":"conical flasks","Indhold":"koniske kolber","Subject matter":"chemistry"},
    {"Cupboard":23,"Room":"Ellipsen","Contents":"bungs","Indhold":"propper","Subject matter":"chemistry"},
    {"Cupboard":23,"Room":"Ellipsen","Contents":"funnels","Indhold":"tragte","Subject matter":"chemistry"},
    {"Cupboard":24,"Room":"Ellipsen","Contents":"bungs","Indhold":"propper","Subject matter":"chemistry"},
    {"Cupboard":24,"Room":"Ellipsen","Contents":"conical flasks","Indhold":"kolber","Subject matter":"chemistry"},
    {"Cupboard":25,"Room":"Ellipsen","Contents":"Powerpacks","Indhold":"Stømforsyninger","Subject matter":"electricity"},
    {"Cupboard":27,"Room":"Ellipsen","Contents":"old powerpacks","Indhold":"gl. Stømforsyninger","Subject matter":"electricity"},
    {"Cupboard":31,"Room":"Ellipsen","Contents":"clamps","Indhold":"stativklemmer","Subject matter":"-"},
    {"Cupboard":31,"Room":"Ellipsen","Contents":"bosses","Indhold":"","Subject matter":"-"},
    {"Cupboard":32,"Room":"Ellipsen","Contents":"retort stands","Indhold":"spændestativer","Subject matter":"-"},
    {"Cupboard":40,"Room":"Science1","Contents":"torches","Indhold":"lygter","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"lasers","Indhold":"lasere","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"UV lights","Indhold":"UV Lys","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"UV pearls","Indhold":"UV perler","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"Sprectra","Indhold":"Spektra","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"Picture projection","Indhold":"Billed projektion","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"Fiberoptics","Indhold":"Fibreoptik","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"glasses & sunglasses","Indhold":"briller og solbriller","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"colour mixing","Indhold":"farve blænding","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"reflectors","Indhold":"refleks","Subject matter":"Light"},
    {"Cupboard":40,"Room":"Science1","Contents":"tunung forks","Indhold":"stemmegafler","Subject matter":"sound"},
    {"Cupboard":40,"Room":"Science1","Contents":"sound generators","Indhold":"lyd genoratorer","Subject matter":"sound"},
    {"Cupboard":40,"Room":"Science1","Contents":"sound measurement","Indhold":"lyd målere","Subject matter":"sound"},
    {"Cupboard":40,"Room":"Science1","Contents":"Doppler Effect","Indhold":"Doppler effekt","Subject matter":"sound"},
    {"Cupboard":40,"Room":"Science1","Contents":"standing waves","Indhold":"stående bølger","Subject matter":"sound"},
    {"Cupboard":40,"Room":"Science1","Contents":"masses (weights)","Indhold":"Lodder","Subject matter":"-"},
    {"Cupboard":40,"Room":"Science1","Contents":"Newton meters","Indhold":"kraftmålere","Subject matter":"measurement"},
    {"Cupboard":40,"Room":"Science1","Contents":"springs","Indhold":"springs","Subject matter":"-"},
    {"Cupboard":41,"Room":"Science1","Contents":"Speed of sound kit","Indhold":"Lydhastigheds måler","Subject matter":"sound"},
    {"Cupboard":42,"Room":"Science1","Contents":"solfangerkit","Indhold":"solfangerkit","Subject matter":"energy"},
    {"Cupboard":42,"Room":"Science1","Contents":"sun screen","Indhold":"solkrem","Subject matter":"Light"},
    {"Cupboard":42,"Room":"Science1","Contents":"højtaler","Indhold":"speaker","Subject matter":"sound"},
    {"Cupboard":42,"Room":"Science1","Contents":"ultralyd","Indhold":"ultrasound","Subject matter":"sound"},
    {"Cupboard":43,"Room":"Science2","Contents":"electronic kits","Indhold":"","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"motors","Indhold":"motorer","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"ammeters","Indhold":"ammeter","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"crokodile clips (small)","Indhold":"krokodille klips (små)","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"lamps","Indhold":"elpærer","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"voltmeters","Indhold":"voltmeter","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"transformers","Indhold":"transformere","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"Galvometers","Indhold":"galvometre","Subject matter":"electricity"},
    {"Cupboard":43,"Room":"Science2","Contents":"Magnets","Indhold":"magneter","Subject matter":"magnatism"},
    {"Cupboard":44,"Room":"Science2","Contents":"high voltage power supply","Indhold":"højspænding","Subject matter":"electricity"},
    {"Cupboard":44,"Room":"Science2","Contents":"molecular construction sets","Indhold":"molekule konstruktionssæt","Subject matter":"-"},
    {"Cupboard":44,"Room":"Science2","Contents":"Gastest kit","Indhold":"Gastest kit","Subject matter":"chemistry"},
    {"Cupboard":44,"Room":"Science2","Contents":"ticker timers","Indhold":"ticker timers","Subject matter":"physics"},
    {"Cupboard":44,"Room":"Science2","Contents":"trolleys","Indhold":"vogne","Subject matter":"physics"},
    {"Cupboard":44,"Room":"Science2","Contents":"pulleys","Indhold":"taljer","Subject matter":"physics"},
    {"Cupboard":44,"Room":"Science2","Contents":"light gate","Indhold":"light gate","Subject matter":"physics"},
    {"Cupboard":44,"Room":"Science2","Contents":"bimetallic strips","Indhold":"bimetallic strips","Subject matter":"physics"},
    {"Cupboard":44,"Room":"Science2","Contents":"metals","Indhold":"metaller","Subject matter":"physics"},
    {"Cupboard":44,"Room":"Science2","Contents":"cables","Indhold":"ledninger","Subject matter":"electricity"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco accelerometer","Indhold":"pasco accelerometre","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco co2 detector","Indhold":"pasco co2 detektorer","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco lightsensors","Indhold":"pasco lyssensorer","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco PH sensors","Indhold":"pasco PH sensorer","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco magnetic field sensors","Indhold":"pasco magnetiskfelt sensorer","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco heartbeat sensor","Indhold":"pasco herteslagssensor","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco bluetooth connectors","Indhold":"pasco bluetooth connector","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco digital adapter","Indhold":"pasco digital adapter","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco thermometers","Indhold":"pasco termometre","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco ammeters","Indhold":"pasco ammetre","Subject matter":"digital equipment"},
    {"Cupboard":45,"Room":"Science2","Contents":"pasco voltmeters","Indhold":"pasco voltmetre","Subject matter":"digital equipment"}
];

const savedPositions = {
    "Ellipsen": {
        "1": {"x": 135.9140625, "y": 197},
        "2": {"x": 141.9140625, "y": 159.5},
        "3": {"x": 150.9140625, "y": 121.5},
        "4": {"x": 175.9140625, "y": 67.5},
        "5": {"x": 198.9140625, "y": 37.5},
        "6": {"x": 233.9140625, "y": 17.5},
        "7": {"x": 265.9140625, "y": 17.5},
        "8": {"x": 296.9140625, "y": 37.5},
        "9": {"x": 324.9140625, "y": 70.5},
        "10": {"x": 348.9140625, "y": 125.5},
        "11": {"x": 358.9140625, "y": 162.5},
        "12": {"x": 362.9140625, "y": 197.5},
        "13": {"x": 366.9140625, "y": 312.5},
        "14": {"x": 357.9140625, "y": 350.5},
        "15": {"x": 327.9140625, "y": 436.5},
        "16": {"x": 327.9140625, "y": 436.5},
        "17": {"x": 305.9140625, "y": 467.5},
        "18": {"x": 274.9140625, "y": 491.5},
        "19": {"x": 228.9140625, "y": 492},
        "20": {"x": 191.9140625, "y": 466.5},
        "21": {"x": 166.9140625, "y": 433.5},
        "22": {"x": 145.9140625, "y": 387.5},
        "23": {"x": 138.9140625, "y": 351.5},
        "24": {"x": 133.9140625, "y": 312.5},
        "25": {"x": 204.9140625, "y": 228.5},
        "26": {"x": 212.9140625, "y": 197.5},
        "27": {"x": 227.9140625, "y": 169.5},
        "28": {"x": 274.9140625, "y": 172.5},
        "29": {"x": 289.9140625, "y": 199.5},
        "30": {"x": 300.9140625, "y": 231.5},
        "31": {"x": 299.9140625, "y": 268.5},
        "32": {"x": 290.9140625, "y": 308.5},
        "33": {"x": 273.9140625, "y": 340.5},
        "34": {"x": 228.9140625, "y": 340.5},
        "35": {"x": 209.9140625, "y": 311.5},
        "36": {"x": 205.9140625, "y": 271.5},
        "37": {"x": 48.9140625, "y": 146.5},
        "38": {"x": 49.9140625, "y": 288.5},
        "39": {"x": 474.9140625, "y": 322.5}
    },
    "Science1": {
        "40": {"x": 53.9140625, "y": 136.5},
        "41": {"x": 124.9140625, "y": 137.5},
        "42": {"x": 295.9140625, "y": 137.5}
    },
    "Science2": {
        "43": {"x": 38.9140625, "y": 117},
        "44": {"x": 92.9140625, "y": 118},
        "45": {"x": 210.9140625, "y": 117.5},
        "46": {"x": 263.9140625, "y": 120},
        "47": {"x": 346.9140625, "y": 179}
    }
};

let currentFilter = '';

function handleSearch(query) {
    if (!query.trim()) {
        document.getElementById('results').style.display = 'none';
        document.getElementById('floorPlanContainer').style.display = 'none';
        return;
    }
    
    const results = equipmentData.filter(item => {
        if (currentFilter && item['Subject matter'] !== currentFilter) return false;
        
        const searchText = query.toLowerCase();
        return item.Contents.toLowerCase().includes(searchText) ||
               item.Indhold.toLowerCase().includes(searchText) ||
               item.Room.toLowerCase().includes(searchText) ||
               item.Cupboard.toString().includes(searchText);
    });
    
    showResults(results);
    showFloorPlans(results);
}

function showResults(results) {
    const container = document.getElementById('results');
    
    if (results.length === 0) {
        container.innerHTML = '<div class="result-item"><h3>No equipment found</h3><p>Try different search terms or check the subject filters above.</p></div>';
    } else {
        container.innerHTML = results.map(item => 
            '<div class="result-item">' +
                '<div class="cupboard-highlight">🔍 Cupboard ' + item.Cupboard + '</div>' +
                '<div class="equipment-details">' +
                    '<div class="detail-item">' +
                        '<span class="detail-label">English:</span>' +
                        '<span class="detail-value">' + item.Contents + '</span>' +
                    '</div>' +
                    '<div class="detail-item">' +
                        '<span class="detail-label">Danish:</span>' +
                        '<span class="detail-value">' + item.Indhold + '</span>' +
                    '</div>' +
                    '<div class="detail-item">' +
                        '<span class="detail-label">Room:</span>' +
                        '<span class="room-tag">' + item.Room + '</span>' +
                    '</div>' +
                    '<div class="detail-item">' +
                        '<span class="detail-label">Subject:</span>' +
                        '<span class="subject-tag">' + (item['Subject matter'] === '-' ? 'General' : item['Subject matter']) + '</span>' +
                    '</div>' +
                '</div>' +
            '</div>'
        ).join('');
    }
    
    container.style.display = 'block';
}

function showFloorPlans(results) {
    const container = document.getElementById('floorPlanContainer');
    const titleEl = document.getElementById('floorPlanTitle');
    const imageEl = document.getElementById('floorPlanImage');
    
    if (results.length === 0) {
        container.style.display = 'none';
        return;
    }
    
    const roomGroups = {};
    results.forEach(item => {
        if (!roomGroups[item.Room]) {
            roomGroups[item.Room] = [];
        }
        roomGroups[item.Room].push(item.Cupboard);
    });
    
    const rooms = Object.keys(roomGroups);
    titleEl.textContent = rooms.length === 1 ? 
        `📍 ${rooms[0]} Floor Plan` : 
        `📍 Equipment found in ${rooms.length} rooms`;
    
    imageEl.innerHTML = rooms.map(room => {
        const cupboards = [...new Set(roomGroups[room])];
        return createFloorPlanHTML(room, cupboards);
    }).join('');
    
    container.style.display = 'block';
}

function createFloorPlanHTML(room, highlightCupboards) {
    const roomTitle = room === 'Ellipsen' ? 'Ellipsen (Main Lab)' : room;
    
    return `
        <div style="margin-bottom: 30px;">
            <h4 style="margin-bottom: 15px; color: #1976d2;">${roomTitle}</h4>
            <div style="font-size: 0.9em; color: #666; margin-bottom: 10px;">
                Equipment found in cupboards: <strong>${highlightCupboards.sort((a,b) => a-b).join(', ')}</strong>
            </div>
            <div style="position: relative; display: inline-block; background: white; padding: 20px; border-radius: 8px; border: 1px solid #ddd;">
                ${getFloorPlanImage(room)}
                ${createHighlightOverlays(room, highlightCupboards)}
            </div>
            <div style="margin-top: 10px; font-size: 0.8em; color: #888;">
                🎯 Red arrows point to cupboards containing your equipment
            </div>
        </div>
    `;
}

function getFloorPlanImage(room) {
    if (room === 'Ellipsen') {
        return `
            <div style="position: relative; display: inline-block;">
                <div style="width: 500px; height: 500px; background: #f9f9f9; border: 2px solid #ddd; border-radius: 8px; background-image: url('ellipsen.png'); background-size: contain; background-repeat: no-repeat; background-position: center;">
                </div>
            </div>
        `;
    } else if (room === 'Science1') {
        return `
            <div style="position: relative; display: inline-block;">
                <div style="width: 400px; height: 300px; background: #f9f9f9; border: 2px solid #ddd; border-radius: 8px; background-image: url('science1.png'); background-size: contain; background-repeat: no-repeat; background-position: center;">
                </div>
            </div>
        `;
    } else if (room === 'Science2') {
        return `
            <div style="position: relative; display: inline-block;">
                <div style="width: 400px; height: 300px; background: #f9f9f9; border: 2px solid #ddd; border-radius: 8px; background-image: url('science2.png'); background-size: contain; background-repeat: no-repeat; background-position: center;">
                </div>
            </div>
        `;
    }
}

function createHighlightOverlays(room, highlightCupboards) {
    return highlightCupboards.map(cupboard => {
        const position = getCupboardPosition(room, cupboard);
        return `
            <div style="position: absolute; left: ${position.x}px; top: ${position.y}px; z-index: 10;">
                <div style="background: #ff4444; color: white; padding: 4px 8px; border-radius: 15px; font-size: 12px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3); animation: bounce 2s infinite;">
                    ${cupboard}
                </div>
                <div style="width: 0; height: 0; border-left: 6px solid transparent; border-right: 6px solid transparent; border-top: 8px solid #ff4444; margin: 0 auto;"></div>
            </div>
        `;
    }).join('');
}

function getCupboardPosition(room, cupboard) {
    return savedPositions[room] && savedPositions[room][cupboard] ? savedPositions[room][cupboard] : {x: 100, y: 100};
}

function filterBySubject(subject, button) {
    document.querySelectorAll('.filter-button').forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');
    currentFilter = subject;
    
    const query = document.querySelector('.search-input').value;
    handleSearch(query);
}

console.log('Lab Equipment Finder ready with ' + equipmentData.length + ' items');
</script>
</body>
</html>